{"ast":null,"code":"// import React, { useEffect, useState } from \"react\";\n// import { useParams, Link } from \"react-router-dom\";\n// import API from \"../api/axiosInstance\";\n// import { motion } from \"framer-motion\";\n// import { ThumbUpIcon, ThumbDownIcon } from \"@heroicons/react/solid\";\n\n// const BlogPage = () => {\n//   const { id } = useParams();\n//   const [blog, setBlog] = useState(null);\n//   const [loading, setLoading] = useState(true);\n//   const [voting, setVoting] = useState(false);\n//   const [error, setError] = useState(null);\n\n//   useEffect(() => {\n//     const fetchBlog = async () => {\n//       try {\n//         setLoading(true);\n//         const { data } = await API.get(`/blogs/${id}`);\n//         setBlog(data);\n//       } catch (error) {\n//         console.error(\"Error fetching blog:\", error);\n//         setError(\"Failed to load blog.\");\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n//     fetchBlog();\n//   }, [id]);\n\n//   const handleVote = async (voteType) => {\n//     try {\n//       setVoting(true);\n//       setError(null);\n//       const token = localStorage.getItem(\"token\");\n//       if (!token) {\n//         setError(\"You must be logged in to vote.\");\n//         return;\n//       }\n//       const endpoint = voteType === \"upvote\" ? `/blogs/${id}/upvote` : `/blogs/${id}/downvote`;\n//       const { data } = await API.post(endpoint, {}, { headers: { Authorization: `Bearer ${token}` } });\n\n//       setBlog((prevBlog) => ({\n//         ...prevBlog,\n//         upvotes: data.upvotes || 0,\n//         downvotes: data.downvotes || 0,\n//         upvotedBy: data.upvotedBy || prevBlog.upvotedBy,\n//         downvotedBy: data.downvotedBy || prevBlog.downvotedBy,\n//       }));\n//     } catch (error) {\n//       console.error(\"Error voting:\", error);\n//       setError(error.response?.data?.message || \"Failed to vote.\");\n//     } finally {\n//       setVoting(false);\n//     }\n//   };\n\n//   if (loading) return <p className=\"text-center mt-5 text-gray-600\">Loading blog...</p>;\n//   if (!blog) return <p className=\"text-center mt-5 text-red-500\">Blog not found.</p>;\n\n//   return (\n//     <div className=\"min-h-screen bg-gradient-to-r from-gray-50 to-blue-50 p-5\">\n//       {error && <div className=\"mb-4 p-3 bg-red-100 text-red-700 rounded-md text-center\">{error}</div>}\n\n//       <div className=\"max-w-3xl mx-auto bg-white shadow-lg rounded-lg p-5\">\n//         <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.5 }}>\n//           <h2 className=\"text-4xl font-bold text-gray-800 mb-2\">{blog.title}</h2>\n//           <p className=\"text-gray-600 mb-4 whitespace-pre-wrap\">{blog.content}</p>\n//           {blog.fileUrl && (\n//             <div className=\"mb-4\">\n//               {blog.fileUrl.endsWith(\".pdf\") ? (\n//                 <a href={blog.fileUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 hover:underline\">\n//                   View PDF\n//                 </a>\n//               ) : blog.fileUrl.match(/\\.(mp4|webm|ogg)$/) ? (\n//                 <video controls src={blog.fileUrl} className=\"w-full max-h-64\" />\n//               ) : blog.fileUrl.match(/\\.(mp3|wav|ogg)$/) ? (\n//                 <audio controls src={blog.fileUrl} className=\"w-full\" />\n//               ) : (\n//                 <img src={blog.fileUrl} alt=\"Blog media\" className=\"w-full max-h-64 object-cover rounded-lg\" />\n//               )}\n//             </div>\n//           )}\n//           <p className=\"text-sm text-blue-600 mb-4\">\n//             By:{\" \"}\n//             <Link to={`/profile/${blog.author?.username || 'unknown'}`} className=\"font-semibold hover:underline\">\n//               {blog.author?.username || \"Unknown\"}\n//             </Link> | Posted:{\" \"}\n//             <span className=\"font-semibold\">{blog.createdAt ? new Date(blog.createdAt).toLocaleString() : \"Unknown\"}</span>\n//           </p>\n\n//           <div className=\"flex space-x-4 mb-6\">\n//             <motion.button\n//               whileHover={{ scale: 1.05 }}\n//               whileTap={{ scale: 0.95 }}\n//               onClick={() => handleVote(\"upvote\")}\n//               disabled={voting}\n//               className={`flex items-center px-4 py-2 rounded-lg shadow-md transition-colors duration-200 ${\n//                 voting ? \"bg-green-300 cursor-not-allowed\" : \"bg-green-500 hover:bg-green-600\"\n//               } text-white`}\n//             >\n//               <ThumbUpIcon className=\"h-5 w-5 mr-2\" />\n//               Upvote ({blog.upvotes || 0})\n//             </motion.button>\n//             <motion.button\n//               whileHover={{ scale: 1.05 }}\n//               whileTap={{ scale: 0.95 }}\n//               onClick={() => handleVote(\"downvote\")}\n//               disabled={voting}\n//               className={`flex items-center px-4 py-2 rounded-lg shadow-md transition-colors duration-200 ${\n//                 voting ? \"bg-red-300 cursor-not-allowed\" : \"bg-red-500 hover:bg-red-600\"\n//               } text-white`}\n//             >\n//               <ThumbDownIcon className=\"h-5 w-5 mr-2\" />\n//               Downvote ({blog.downvotes || 0})\n//             </motion.button>\n//           </div>\n//         </motion.div>\n//       </div>\n\n//       <div className=\"max-w-3xl mx-auto text-center mt-8\">\n//         <Link to=\"/blogs\" className=\"text-blue-600 hover:underline font-semibold\">\n//           ← Back to Blog Hub\n//         </Link>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default BlogPage;","map":{"version":3,"names":[],"sources":["/Users/govindsinghtanwar/coding/Projects/debatify/frontend/src/pages/BlogPage.js"],"sourcesContent":["// import React, { useEffect, useState } from \"react\";\n// import { useParams, Link } from \"react-router-dom\";\n// import API from \"../api/axiosInstance\";\n// import { motion } from \"framer-motion\";\n// import { ThumbUpIcon, ThumbDownIcon } from \"@heroicons/react/solid\";\n\n// const BlogPage = () => {\n//   const { id } = useParams();\n//   const [blog, setBlog] = useState(null);\n//   const [loading, setLoading] = useState(true);\n//   const [voting, setVoting] = useState(false);\n//   const [error, setError] = useState(null);\n\n//   useEffect(() => {\n//     const fetchBlog = async () => {\n//       try {\n//         setLoading(true);\n//         const { data } = await API.get(`/blogs/${id}`);\n//         setBlog(data);\n//       } catch (error) {\n//         console.error(\"Error fetching blog:\", error);\n//         setError(\"Failed to load blog.\");\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n//     fetchBlog();\n//   }, [id]);\n\n//   const handleVote = async (voteType) => {\n//     try {\n//       setVoting(true);\n//       setError(null);\n//       const token = localStorage.getItem(\"token\");\n//       if (!token) {\n//         setError(\"You must be logged in to vote.\");\n//         return;\n//       }\n//       const endpoint = voteType === \"upvote\" ? `/blogs/${id}/upvote` : `/blogs/${id}/downvote`;\n//       const { data } = await API.post(endpoint, {}, { headers: { Authorization: `Bearer ${token}` } });\n\n//       setBlog((prevBlog) => ({\n//         ...prevBlog,\n//         upvotes: data.upvotes || 0,\n//         downvotes: data.downvotes || 0,\n//         upvotedBy: data.upvotedBy || prevBlog.upvotedBy,\n//         downvotedBy: data.downvotedBy || prevBlog.downvotedBy,\n//       }));\n//     } catch (error) {\n//       console.error(\"Error voting:\", error);\n//       setError(error.response?.data?.message || \"Failed to vote.\");\n//     } finally {\n//       setVoting(false);\n//     }\n//   };\n\n//   if (loading) return <p className=\"text-center mt-5 text-gray-600\">Loading blog...</p>;\n//   if (!blog) return <p className=\"text-center mt-5 text-red-500\">Blog not found.</p>;\n\n//   return (\n//     <div className=\"min-h-screen bg-gradient-to-r from-gray-50 to-blue-50 p-5\">\n//       {error && <div className=\"mb-4 p-3 bg-red-100 text-red-700 rounded-md text-center\">{error}</div>}\n\n//       <div className=\"max-w-3xl mx-auto bg-white shadow-lg rounded-lg p-5\">\n//         <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.5 }}>\n//           <h2 className=\"text-4xl font-bold text-gray-800 mb-2\">{blog.title}</h2>\n//           <p className=\"text-gray-600 mb-4 whitespace-pre-wrap\">{blog.content}</p>\n//           {blog.fileUrl && (\n//             <div className=\"mb-4\">\n//               {blog.fileUrl.endsWith(\".pdf\") ? (\n//                 <a href={blog.fileUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 hover:underline\">\n//                   View PDF\n//                 </a>\n//               ) : blog.fileUrl.match(/\\.(mp4|webm|ogg)$/) ? (\n//                 <video controls src={blog.fileUrl} className=\"w-full max-h-64\" />\n//               ) : blog.fileUrl.match(/\\.(mp3|wav|ogg)$/) ? (\n//                 <audio controls src={blog.fileUrl} className=\"w-full\" />\n//               ) : (\n//                 <img src={blog.fileUrl} alt=\"Blog media\" className=\"w-full max-h-64 object-cover rounded-lg\" />\n//               )}\n//             </div>\n//           )}\n//           <p className=\"text-sm text-blue-600 mb-4\">\n//             By:{\" \"}\n//             <Link to={`/profile/${blog.author?.username || 'unknown'}`} className=\"font-semibold hover:underline\">\n//               {blog.author?.username || \"Unknown\"}\n//             </Link> | Posted:{\" \"}\n//             <span className=\"font-semibold\">{blog.createdAt ? new Date(blog.createdAt).toLocaleString() : \"Unknown\"}</span>\n//           </p>\n\n//           <div className=\"flex space-x-4 mb-6\">\n//             <motion.button\n//               whileHover={{ scale: 1.05 }}\n//               whileTap={{ scale: 0.95 }}\n//               onClick={() => handleVote(\"upvote\")}\n//               disabled={voting}\n//               className={`flex items-center px-4 py-2 rounded-lg shadow-md transition-colors duration-200 ${\n//                 voting ? \"bg-green-300 cursor-not-allowed\" : \"bg-green-500 hover:bg-green-600\"\n//               } text-white`}\n//             >\n//               <ThumbUpIcon className=\"h-5 w-5 mr-2\" />\n//               Upvote ({blog.upvotes || 0})\n//             </motion.button>\n//             <motion.button\n//               whileHover={{ scale: 1.05 }}\n//               whileTap={{ scale: 0.95 }}\n//               onClick={() => handleVote(\"downvote\")}\n//               disabled={voting}\n//               className={`flex items-center px-4 py-2 rounded-lg shadow-md transition-colors duration-200 ${\n//                 voting ? \"bg-red-300 cursor-not-allowed\" : \"bg-red-500 hover:bg-red-600\"\n//               } text-white`}\n//             >\n//               <ThumbDownIcon className=\"h-5 w-5 mr-2\" />\n//               Downvote ({blog.downvotes || 0})\n//             </motion.button>\n//           </div>\n//         </motion.div>\n//       </div>\n\n//       <div className=\"max-w-3xl mx-auto text-center mt-8\">\n//         <Link to=\"/blogs\" className=\"text-blue-600 hover:underline font-semibold\">\n//           ← Back to Blog Hub\n//         </Link>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default BlogPage;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}