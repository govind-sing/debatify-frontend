{"ast":null,"code":"// import React, { useState } from \"react\";\n// import { useNavigate } from \"react-router-dom\";\n// import { motion } from \"framer-motion\";\n// import API from \"../api/axiosInstance\";\n// import { CheckCircleIcon } from \"@heroicons/react/outline\";\n\n// const CreateBlog = () => {\n//   const [form, setForm] = useState({ title: \"\", content: \"\" });\n//   const [file, setFile] = useState(null);\n//   const [isPrivate, setIsPrivate] = useState(false);\n//   const [passcode, setPasscode] = useState(\"\");\n//   const [loading, setLoading] = useState(false);\n//   const [success, setSuccess] = useState(false);\n//   const [error, setError] = useState(null);\n//   const navigate = useNavigate();\n\n//   const handleChange = (e) => {\n//     setForm({ ...form, [e.target.name]: e.target.value });\n//   };\n\n//   const handleFileChange = (e) => {\n//     const selectedFile = e.target.files[0];\n//     if (selectedFile) {\n//       if (selectedFile.size > 2 * 1024 * 1024) {\n//         setError(\"File size must be less than 2MB.\");\n//         setFile(null);\n//       } else {\n//         setError(null);\n//         setFile(selectedFile);\n//       }\n//     } else {\n//       setFile(null); // Allow clearing the file\n//     }\n//   };\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n//     setError(null);\n\n//     try {\n//       const token = localStorage.getItem(\"token\");\n//       console.log(\"Token being sent:\", token); // Debug\n//       if (!token) {\n//         setError(\"You must be logged in to create a blog.\");\n//         setLoading(false);\n//         return;\n//       }\n\n//       if (!form.title.trim() || !form.content.trim()) {\n//         setError(\"Title and content are required.\");\n//         setLoading(false);\n//         return;\n//       }\n\n//       if (isPrivate && !passcode.trim()) {\n//         setError(\"Passcode is required for private blogs.\");\n//         setLoading(false);\n//         return;\n//       }\n\n//       const formData = new FormData();\n//       formData.append(\"title\", form.title);\n//       formData.append(\"content\", form.content);\n//       formData.append(\"isPrivate\", isPrivate);\n//       formData.append(\"passcode\", isPrivate ? passcode : \"\");\n//       if (file) formData.append(\"file\", file);\n\n//       const response = await API.post(\"/blogs\", formData, {\n//         headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"multipart/form-data\" },\n//       });\n\n//       console.log(\"Blog created successfully:\", response.data);\n//       setSuccess(true);\n//       setTimeout(() => navigate(\"/blogs\"), 1500);\n//     } catch (error) {\n//       console.error(\"Error creating blog:\", error.response?.data || error.message);\n//       setError(error.response?.data?.message || \"Failed to create blog. Please try again.\");\n//       setLoading(false);\n//     }\n//   };\n\n//   return (\n//     <div className=\"min-h-screen bg-gradient-to-br from-gray-100 via-blue-100 to-green-100 flex items-center justify-center p-4\">\n//       <motion.div\n//         initial={{ opacity: 0, y: 50 }}\n//         animate={{ opacity: 1, y: 0 }}\n//         transition={{ duration: 0.8, ease: \"easeOut\" }}\n//         className=\"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md transform transition-all duration-300 hover:shadow-3xl\"\n//       >\n//         <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }} transition={{ duration: 0.5 }} className=\"text-center\">\n//           <h2 className=\"text-3xl font-extrabold text-gray-800 mb-6\">\n//             Write a <span className=\"text-yellow-400\">Blog</span>\n//           </h2>\n//         </motion.div>\n\n//         {success ? (\n//           <motion.div\n//             initial={{ opacity: 0, scale: 0.8 }}\n//             animate={{ opacity: 1, scale: 1 }}\n//             transition={{ duration: 0.5 }}\n//             className=\"text-center\"\n//           >\n//             <CheckCircleIcon className=\"h-20 w-20 text-green-500 mx-auto mb-4 animate-pulse\" />\n//             <p className=\"text-xl font-semibold text-green-600\">Blog Posted Successfully!</p>\n//             <p className=\"text-gray-500 mt-2\">Redirecting to Blog Hub...</p>\n//           </motion.div>\n//         ) : (\n//           <form onSubmit={handleSubmit} className=\"space-y-6\">\n//             {error && <div className=\"text-red-500 text-sm text-center\">{error}</div>}\n\n//             <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1, duration: 0.5 }}>\n//               <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n//                 Title\n//               </label>\n//               <input\n//                 type=\"text\"\n//                 id=\"title\"\n//                 name=\"title\"\n//                 placeholder=\"Enter blog title\"\n//                 value={form.title}\n//                 onChange={handleChange}\n//                 className=\"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-300\"\n//                 required\n//               />\n//             </motion.div>\n\n//             <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2, duration: 0.5 }}>\n//               <label htmlFor=\"content\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n//                 Content\n//               </label>\n//               <textarea\n//                 id=\"content\"\n//                 name=\"content\"\n//                 placeholder=\"Write your blog content...\"\n//                 value={form.content}\n//                 onChange={handleChange}\n//                 className=\"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-300 h-32 resize-none\"\n//                 required\n//               />\n//             </motion.div>\n\n//             <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3, duration: 0.5 }}>\n//               <label htmlFor=\"file\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n//                 Attach File (Optional - Image, Video, Audio, PDF - Max 2MB)\n//               </label>\n//               <input\n//                 type=\"file\"\n//                 id=\"file\"\n//                 accept=\"image/*,video/*,audio/*,application/pdf\"\n//                 onChange={handleFileChange}\n//                 className=\"w-full px-4 py-2 border border-gray-300 rounded-xl text-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\"\n//               />\n//             </motion.div>\n\n//             <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.4, duration: 0.5 }}>\n//               <label className=\"flex items-center space-x-2 text-sm font-medium text-gray-700\">\n//                 <input\n//                   type=\"checkbox\"\n//                   checked={isPrivate}\n//                   onChange={(e) => setIsPrivate(e.target.checked)}\n//                   className=\"h-5 w-5 text-yellow-400 border-gray-300 rounded\"\n//                 />\n//                 <span>Keep this blog private</span>\n//               </label>\n//             </motion.div>\n\n//             {isPrivate && (\n//               <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.5, duration: 0.5 }}>\n//                 <label htmlFor=\"passcode\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n//                   Set a Passcode\n//                 </label>\n//                 <input\n//                   type=\"password\"\n//                   id=\"passcode\"\n//                   name=\"passcode\"\n//                   placeholder=\"Enter a passcode\"\n//                   value={passcode}\n//                   onChange={(e) => setPasscode(e.target.value)}\n//                   className=\"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-300\"\n//                   required={isPrivate}\n//                 />\n//               </motion.div>\n//             )}\n\n//             <motion.button\n//               type=\"submit\"\n//               disabled={loading}\n//               whileHover={{ scale: 1.05 }}\n//               whileTap={{ scale: 0.95 }}\n//               transition={{ duration: 0.3 }}\n//               className={`w-full bg-gradient-to-r from-blue-500 to-green-600 text-white p-2 rounded-xl shadow-md hover:from-blue-600 hover:to-green-700 transition-all duration-300 ${\n//                 loading ? \"opacity-70 cursor-not-allowed\" : \"\"\n//               }`}\n//             >\n//               {loading ? (\n//                 <span className=\"flex items-center justify-center\">\n//                   <svg\n//                     className=\"animate-spin h-5 w-5 mr-2 text-white\"\n//                     xmlns=\"http://www.w3.org/2000/svg\"\n//                     fill=\"none\"\n//                     viewBox=\"0 0 24 24\"\n//                   >\n//                     <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n//                     <path\n//                       className=\"opacity-75\"\n//                       fill=\"currentColor\"\n//                       d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n//                     ></path>\n//                   </svg>\n//                   Posting...\n//                 </span>\n//               ) : (\n//                 \"Post Blog\"\n//               )}\n//             </motion.button>\n//           </form>\n//         )}\n//       </motion.div>\n//     </div>\n//   );\n// };\n\n// export default CreateBlog;","map":{"version":3,"names":[],"sources":["/Users/govindsinghtanwar/coding/Projects/debatify/frontend/src/pages/CreateBlog.js"],"sourcesContent":["// import React, { useState } from \"react\";\n// import { useNavigate } from \"react-router-dom\";\n// import { motion } from \"framer-motion\";\n// import API from \"../api/axiosInstance\";\n// import { CheckCircleIcon } from \"@heroicons/react/outline\";\n\n// const CreateBlog = () => {\n//   const [form, setForm] = useState({ title: \"\", content: \"\" });\n//   const [file, setFile] = useState(null);\n//   const [isPrivate, setIsPrivate] = useState(false);\n//   const [passcode, setPasscode] = useState(\"\");\n//   const [loading, setLoading] = useState(false);\n//   const [success, setSuccess] = useState(false);\n//   const [error, setError] = useState(null);\n//   const navigate = useNavigate();\n\n//   const handleChange = (e) => {\n//     setForm({ ...form, [e.target.name]: e.target.value });\n//   };\n\n//   const handleFileChange = (e) => {\n//     const selectedFile = e.target.files[0];\n//     if (selectedFile) {\n//       if (selectedFile.size > 2 * 1024 * 1024) {\n//         setError(\"File size must be less than 2MB.\");\n//         setFile(null);\n//       } else {\n//         setError(null);\n//         setFile(selectedFile);\n//       }\n//     } else {\n//       setFile(null); // Allow clearing the file\n//     }\n//   };\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n//     setError(null);\n  \n//     try {\n//       const token = localStorage.getItem(\"token\");\n//       console.log(\"Token being sent:\", token); // Debug\n//       if (!token) {\n//         setError(\"You must be logged in to create a blog.\");\n//         setLoading(false);\n//         return;\n//       }\n  \n//       if (!form.title.trim() || !form.content.trim()) {\n//         setError(\"Title and content are required.\");\n//         setLoading(false);\n//         return;\n//       }\n  \n//       if (isPrivate && !passcode.trim()) {\n//         setError(\"Passcode is required for private blogs.\");\n//         setLoading(false);\n//         return;\n//       }\n  \n//       const formData = new FormData();\n//       formData.append(\"title\", form.title);\n//       formData.append(\"content\", form.content);\n//       formData.append(\"isPrivate\", isPrivate);\n//       formData.append(\"passcode\", isPrivate ? passcode : \"\");\n//       if (file) formData.append(\"file\", file);\n  \n//       const response = await API.post(\"/blogs\", formData, {\n//         headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"multipart/form-data\" },\n//       });\n  \n//       console.log(\"Blog created successfully:\", response.data);\n//       setSuccess(true);\n//       setTimeout(() => navigate(\"/blogs\"), 1500);\n//     } catch (error) {\n//       console.error(\"Error creating blog:\", error.response?.data || error.message);\n//       setError(error.response?.data?.message || \"Failed to create blog. Please try again.\");\n//       setLoading(false);\n//     }\n//   };\n\n//   return (\n//     <div className=\"min-h-screen bg-gradient-to-br from-gray-100 via-blue-100 to-green-100 flex items-center justify-center p-4\">\n//       <motion.div\n//         initial={{ opacity: 0, y: 50 }}\n//         animate={{ opacity: 1, y: 0 }}\n//         transition={{ duration: 0.8, ease: \"easeOut\" }}\n//         className=\"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md transform transition-all duration-300 hover:shadow-3xl\"\n//       >\n//         <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }} transition={{ duration: 0.5 }} className=\"text-center\">\n//           <h2 className=\"text-3xl font-extrabold text-gray-800 mb-6\">\n//             Write a <span className=\"text-yellow-400\">Blog</span>\n//           </h2>\n//         </motion.div>\n\n//         {success ? (\n//           <motion.div\n//             initial={{ opacity: 0, scale: 0.8 }}\n//             animate={{ opacity: 1, scale: 1 }}\n//             transition={{ duration: 0.5 }}\n//             className=\"text-center\"\n//           >\n//             <CheckCircleIcon className=\"h-20 w-20 text-green-500 mx-auto mb-4 animate-pulse\" />\n//             <p className=\"text-xl font-semibold text-green-600\">Blog Posted Successfully!</p>\n//             <p className=\"text-gray-500 mt-2\">Redirecting to Blog Hub...</p>\n//           </motion.div>\n//         ) : (\n//           <form onSubmit={handleSubmit} className=\"space-y-6\">\n//             {error && <div className=\"text-red-500 text-sm text-center\">{error}</div>}\n\n//             <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1, duration: 0.5 }}>\n//               <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n//                 Title\n//               </label>\n//               <input\n//                 type=\"text\"\n//                 id=\"title\"\n//                 name=\"title\"\n//                 placeholder=\"Enter blog title\"\n//                 value={form.title}\n//                 onChange={handleChange}\n//                 className=\"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-300\"\n//                 required\n//               />\n//             </motion.div>\n\n//             <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2, duration: 0.5 }}>\n//               <label htmlFor=\"content\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n//                 Content\n//               </label>\n//               <textarea\n//                 id=\"content\"\n//                 name=\"content\"\n//                 placeholder=\"Write your blog content...\"\n//                 value={form.content}\n//                 onChange={handleChange}\n//                 className=\"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-300 h-32 resize-none\"\n//                 required\n//               />\n//             </motion.div>\n\n//             <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3, duration: 0.5 }}>\n//               <label htmlFor=\"file\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n//                 Attach File (Optional - Image, Video, Audio, PDF - Max 2MB)\n//               </label>\n//               <input\n//                 type=\"file\"\n//                 id=\"file\"\n//                 accept=\"image/*,video/*,audio/*,application/pdf\"\n//                 onChange={handleFileChange}\n//                 className=\"w-full px-4 py-2 border border-gray-300 rounded-xl text-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\"\n//               />\n//             </motion.div>\n\n//             <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.4, duration: 0.5 }}>\n//               <label className=\"flex items-center space-x-2 text-sm font-medium text-gray-700\">\n//                 <input\n//                   type=\"checkbox\"\n//                   checked={isPrivate}\n//                   onChange={(e) => setIsPrivate(e.target.checked)}\n//                   className=\"h-5 w-5 text-yellow-400 border-gray-300 rounded\"\n//                 />\n//                 <span>Keep this blog private</span>\n//               </label>\n//             </motion.div>\n\n//             {isPrivate && (\n//               <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.5, duration: 0.5 }}>\n//                 <label htmlFor=\"passcode\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n//                   Set a Passcode\n//                 </label>\n//                 <input\n//                   type=\"password\"\n//                   id=\"passcode\"\n//                   name=\"passcode\"\n//                   placeholder=\"Enter a passcode\"\n//                   value={passcode}\n//                   onChange={(e) => setPasscode(e.target.value)}\n//                   className=\"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-300\"\n//                   required={isPrivate}\n//                 />\n//               </motion.div>\n//             )}\n\n//             <motion.button\n//               type=\"submit\"\n//               disabled={loading}\n//               whileHover={{ scale: 1.05 }}\n//               whileTap={{ scale: 0.95 }}\n//               transition={{ duration: 0.3 }}\n//               className={`w-full bg-gradient-to-r from-blue-500 to-green-600 text-white p-2 rounded-xl shadow-md hover:from-blue-600 hover:to-green-700 transition-all duration-300 ${\n//                 loading ? \"opacity-70 cursor-not-allowed\" : \"\"\n//               }`}\n//             >\n//               {loading ? (\n//                 <span className=\"flex items-center justify-center\">\n//                   <svg\n//                     className=\"animate-spin h-5 w-5 mr-2 text-white\"\n//                     xmlns=\"http://www.w3.org/2000/svg\"\n//                     fill=\"none\"\n//                     viewBox=\"0 0 24 24\"\n//                   >\n//                     <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n//                     <path\n//                       className=\"opacity-75\"\n//                       fill=\"currentColor\"\n//                       d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n//                     ></path>\n//                   </svg>\n//                   Posting...\n//                 </span>\n//               ) : (\n//                 \"Post Blog\"\n//               )}\n//             </motion.button>\n//           </form>\n//         )}\n//       </motion.div>\n//     </div>\n//   );\n// };\n\n// export default CreateBlog;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}