{"ast":null,"code":"var _jsxFileName = \"/Users/govindsinghtanwar/coding/Projects/debatify/frontend/src/pages/DebatePage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback, useMemo } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport API from \"../api/axiosInstance\";\nimport { motion } from \"framer-motion\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DebatePage = () => {\n  _s();\n  var _debate$author, _debate$author2;\n  const {\n    id\n  } = useParams();\n  const [state, setState] = useState({\n    debate: null,\n    comment: \"\",\n    stance: \"\",\n    userStanceLocked: null,\n    comments: [],\n    loading: true,\n    voting: false,\n    commenting: false,\n    bookmarking: false,\n    error: null,\n    sortBy: \"latest\",\n    passcode: \"\",\n    passcodeRequired: false,\n    enteredPasscode: null\n  });\n  const fetchDebate = useCallback(async (passcodeParam = null) => {\n    try {\n      setState(prev => ({\n        ...prev,\n        loading: true,\n        error: null\n      }));\n      const passcodeToUse = passcodeParam || state.enteredPasscode;\n      const url = passcodeToUse ? `/debates/${id}?passcode=${encodeURIComponent(passcodeToUse)}` : `/debates/${id}`;\n      const {\n        data\n      } = await API.get(url);\n      const token = localStorage.getItem(\"token\");\n      let userStanceLocked = null;\n      if (token) {\n        const userId = JSON.parse(atob(token.split(\".\")[1])).userId;\n        const userComments = data.comments.filter(c => c.user._id === userId);\n        if (userComments.length > 0) userStanceLocked = userComments[0].stance;\n      }\n      setState(prev => ({\n        ...prev,\n        debate: data,\n        comments: data.comments || [],\n        userStanceLocked,\n        enteredPasscode: passcodeParam || prev.enteredPasscode,\n        passcodeRequired: false,\n        loading: false\n      }));\n    } catch (err) {\n      var _err$response;\n      console.error(\"Fetch error:\", ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n      setState(prev => {\n        var _err$response2, _err$response3, _err$response4, _err$response4$data;\n        return {\n          ...prev,\n          loading: false,\n          passcodeRequired: ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 401,\n          error: ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.status) === 401 && passcodeParam ? \"Incorrect passcode. Please try again.\" : ((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || \"Failed to load debate.\"\n        };\n      });\n    }\n  }, [id]);\n  useEffect(() => {\n    fetchDebate();\n  }, [fetchDebate]);\n  useEffect(() => {\n    const intervalId = setInterval(async () => {\n      try {\n        const url = state.enteredPasscode ? `/debates/${id}?passcode=${encodeURIComponent(state.enteredPasscode)}&poll=true` : `/debates/${id}?poll=true`;\n        const {\n          data\n        } = await API.get(url);\n        setState(prev => {\n          const prevDebate = prev.debate || {};\n          const needsUpdate = prevDebate.upvotes !== data.upvotes || prevDebate.downvotes !== data.downvotes || prevDebate.views !== data.views || prevDebate.bookmarkCount !== data.bookmarkCount || JSON.stringify(prevDebate.upvotedBy) !== JSON.stringify(data.upvotedBy) || JSON.stringify(prevDebate.downvotedBy) !== JSON.stringify(data.downvotedBy);\n          const newComments = data.comments || [];\n          const existingCommentIds = new Set(prev.comments.map(c => c._id));\n          const commentsToAdd = newComments.filter(c => !existingCommentIds.has(c._id));\n          return {\n            ...prev,\n            debate: needsUpdate ? {\n              ...prevDebate,\n              upvotes: data.upvotes || 0,\n              downvotes: data.downvotes || 0,\n              views: data.views || 0,\n              bookmarkCount: data.bookmarkCount || 0,\n              upvotedBy: data.upvotedBy || prevDebate.upvotedBy,\n              downvotedBy: data.downvotedBy || prevDebate.downvotedBy,\n              isBookmarked: data.isBookmarked\n            } : prevDebate,\n            comments: [...prev.comments.map(c => {\n              const updated = newComments.find(nc => nc._id === c._id);\n              return updated && (c.likes !== updated.likes || JSON.stringify(c.likedBy) !== JSON.stringify(updated.likedBy)) ? {\n                ...c,\n                likes: updated.likes,\n                likedBy: updated.likedBy\n              } : c;\n            }), ...commentsToAdd]\n          };\n        });\n      } catch (error) {\n        console.error(\"Error polling debate:\", error);\n      }\n    }, 5000);\n    return () => clearInterval(intervalId);\n  }, [id, state.enteredPasscode]);\n  const handlePasscodeSubmit = useCallback(e => {\n    e.preventDefault();\n    if (!state.passcode.trim()) {\n      setState(prev => ({\n        ...prev,\n        error: \"Please enter a passcode.\"\n      }));\n      return;\n    }\n    fetchDebate(state.passcode);\n  }, [fetchDebate, state.passcode]);\n  const handleVote = useCallback(async voteType => {\n    try {\n      setState(prev => ({\n        ...prev,\n        voting: true,\n        error: null\n      }));\n      const token = localStorage.getItem(\"token\");\n      if (!token) throw new Error(\"You must be logged in to vote.\");\n      const endpoint = voteType === \"upvote\" ? `/debates/${id}/upvote` : `/debates/${id}/downvote`;\n      const {\n        data\n      } = await API.post(endpoint, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setState(prev => ({\n        ...prev,\n        debate: {\n          ...prev.debate,\n          upvotes: data.upvotes || 0,\n          downvotes: data.downvotes || 0,\n          upvotedBy: data.upvotedBy || prev.debate.upvotedBy,\n          downvotedBy: data.downvotedBy || prev.debate.downvotedBy\n        },\n        voting: false\n      }));\n    } catch (error) {\n      console.error(\"Error voting:\", error);\n      setState(prev => {\n        var _error$response, _error$response$data;\n        return {\n          ...prev,\n          voting: false,\n          error: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Failed to vote.\"\n        };\n      });\n    }\n  }, [id]);\n  const handleBookmark = useCallback(async () => {\n    try {\n      setState(prev => ({\n        ...prev,\n        bookmarking: true,\n        error: null\n      }));\n      const token = localStorage.getItem(\"token\");\n      if (!token) throw new Error(\"You must be logged in to bookmark.\");\n      const {\n        data\n      } = await API.post(`/debates/${id}/bookmark`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setState(prev => ({\n        ...prev,\n        debate: {\n          ...prev.debate,\n          bookmarkCount: data.bookmarkCount,\n          isBookmarked: data.isBookmarked\n        },\n        bookmarking: false\n      }));\n    } catch (error) {\n      console.error(\"Error bookmarking:\", error);\n      setState(prev => {\n        var _error$response2, _error$response2$data;\n        return {\n          ...prev,\n          bookmarking: false,\n          error: ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || \"Failed to bookmark.\"\n        };\n      });\n    }\n  }, [id]);\n  const handleComment = useCallback(async () => {\n    try {\n      setState(prev => ({\n        ...prev,\n        commenting: true,\n        error: null\n      }));\n      const token = localStorage.getItem(\"token\");\n      if (!token) throw new Error(\"You must be logged in to comment.\");\n      if (!state.comment.trim()) throw new Error(\"Comment cannot be empty.\");\n      if (!state.stance && !state.userStanceLocked) throw new Error(\"Please select your stance.\");\n      const finalStance = state.userStanceLocked || state.stance;\n      const {\n        data\n      } = await API.post(`/debates/${id}/comment`, {\n        text: state.comment,\n        stance: finalStance\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const newComment = data.comments[data.comments.length - 1];\n      setState(prev => ({\n        ...prev,\n        comments: [...prev.comments, newComment],\n        comment: \"\",\n        userStanceLocked: prev.userStanceLocked || finalStance,\n        commenting: false\n      }));\n    } catch (error) {\n      console.error(\"Error commenting:\", error);\n      setState(prev => {\n        var _error$response3, _error$response3$data;\n        return {\n          ...prev,\n          commenting: false,\n          error: ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || \"Failed to comment.\"\n        };\n      });\n    }\n  }, [id, state.comment, state.stance, state.userStanceLocked]);\n  const handleCommentLike = useCallback(async commentId => {\n    try {\n      setState(prev => ({\n        ...prev,\n        error: null\n      }));\n      const token = localStorage.getItem(\"token\");\n      if (!token) throw new Error(\"You must be logged in to like a comment.\");\n      const {\n        data\n      } = await API.post(`/debates/${id}/comment/${commentId}/like`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setState(prev => ({\n        ...prev,\n        comments: prev.comments.map(c => c._id === commentId ? {\n          ...c,\n          likes: data.likes,\n          likedBy: data.likedBy\n        } : c)\n      }));\n    } catch (error) {\n      console.error(\"Error liking comment:\", error);\n      setState(prev => {\n        var _error$response4, _error$response4$data;\n        return {\n          ...prev,\n          error: ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || \"Failed to like comment.\"\n        };\n      });\n    }\n  }, [id]);\n  const sortedComments = useMemo(() => {\n    return [...state.comments].sort((a, b) => {\n      if (state.sortBy === \"mostLiked\") return (b.likes || 0) - (a.likes || 0);\n      if (state.sortBy === \"earliest\") return new Date(a.createdAt) - new Date(b.createdAt);\n      return new Date(b.createdAt) - new Date(a.createdAt);\n    });\n  }, [state.comments, state.sortBy]);\n  const handleInputChange = useCallback(field => e => {\n    setState(prev => ({\n      ...prev,\n      [field]: e.target.value\n    }));\n  }, []);\n  if (state.loading) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center mt-5 md:mt-10 text-gray-600 text-base md:text-lg\",\n      children: \"Loading debate...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this);\n  }\n  if (state.passcodeRequired) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex flex-col justify-center items-center bg-gradient-to-r from-teal-50 to-blue-50 p-4 md:p-5 md:ml-64\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl md:text-2xl font-bold mb-4 text-gray-800\",\n        children: \"This is a Private Debate\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handlePasscodeSubmit,\n        className: \"bg-white shadow-lg rounded-lg p-4 md:p-6 w-full max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block mb-2 text-gray-700 text-sm md:text-base\",\n          children: \"Enter Passcode:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: state.passcode,\n          onChange: handleInputChange(\"passcode\"),\n          className: \"w-full p-2 md:p-3 border rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm md:text-base\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"w-full bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 rounded-lg text-sm md:text-base\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this), state.error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-4 text-red-600 text-sm md:text-base\",\n        children: state.error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this);\n  }\n  if (!state.debate) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center mt-5 md:mt-10 text-red-500 text-base md:text-lg\",\n      children: \"Debate not found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this);\n  }\n  const {\n    debate,\n    comment,\n    stance,\n    userStanceLocked,\n    voting,\n    commenting,\n    bookmarking,\n    error\n  } = state;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-r from-teal-50 to-blue-50 md:ml-64\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 md:p-5 max-w-4xl mx-auto\",\n      children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 p-2 md:p-3 bg-red-100 text-red-700 rounded-md text-center text-sm md:text-base\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white shadow-lg rounded-lg p-4 md:p-5\",\n        children: /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0,\n            y: 20\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          transition: {\n            duration: 0.5\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl md:text-4xl font-bold text-gray-800 mb-2\",\n            children: debate.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mb-4 text-sm md:text-base\",\n            children: debate.openingArgument\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs md:text-sm text-teal-600 mb-4\",\n            children: [\"Category: \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: debate.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 25\n            }, this), \" | By:\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n              to: `/profile/${((_debate$author = debate.author) === null || _debate$author === void 0 ? void 0 : _debate$author.username) || \"unknown\"}`,\n              className: \"font-semibold hover:underline\",\n              children: ((_debate$author2 = debate.author) === null || _debate$author2 === void 0 ? void 0 : _debate$author2.username) || \"Unknown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 15\n            }, this), \" \", \"| Created:\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: debate.createdAt ? new Date(debate.createdAt).toLocaleString() : \"Unknown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this), \" \", \"| Views: \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: debate.viewsFormatted || debate.views || 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 24\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col sm:flex-row sm:space-x-4 mb-4 md:mb-6 space-y-2 sm:space-y-0\",\n            children: [/*#__PURE__*/_jsxDEV(motion.div, {\n              className: `flex items-center rounded-full bg-gray-100 shadow-sm text-sm md:text-base ${voting ? \"opacity-50 cursor-not-allowed\" : \"hover:bg-gray-200\"}`,\n              whileHover: {\n                scale: voting ? 1 : 1.05\n              },\n              whileTap: {\n                scale: voting ? 1 : 0.95\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleVote(\"upvote\"),\n                disabled: voting,\n                className: \"flex items-center px-2 py-1 md:px-3 md:py-2 text-gray-700 hover:text-green-600\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"h-4 w-4 md:h-5 md:w-5\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: \"2\",\n                    d: \"M5 15l7-7 7 7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 340,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"px-1 md:px-2 text-gray-800 font-medium\",\n                children: (debate.upvotes || 0) - (debate.downvotes || 0)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleVote(\"downvote\"),\n                disabled: voting,\n                className: \"flex items-center px-2 py-1 md:px-3 md:py-2 text-gray-700 hover:text-red-600\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"h-4 w-4 md:h-5 md:w-5\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: \"2\",\n                    d: \"M19 9l-7 7-7-7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 357,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n              className: `flex items-center rounded-full bg-gray-100 shadow-sm text-sm md:text-base ${bookmarking ? \"opacity-50 cursor-not-allowed\" : \"hover:bg-gray-200\"} ${debate.isBookmarked ? \"bg-yellow-100 text-yellow-700\" : \"text-gray-700\"}`,\n              whileHover: {\n                scale: bookmarking ? 1 : 1.05\n              },\n              whileTap: {\n                scale: bookmarking ? 1 : 0.95\n              },\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleBookmark,\n                disabled: bookmarking,\n                className: \"flex items-center px-2 py-1 md:px-3 md:py-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"h-4 w-4 md:h-5 md:w-5 mr-1 md:mr-2\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: \"2\",\n                    d: \"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-5-7 5V5z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 380,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: debate.bookmarkCount || 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this), !userStanceLocked && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm md:text-base font-medium text-gray-700 mb-1\",\n              children: \"Your Stance:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-2 md:space-x-4\",\n              children: [\"with\", \"against\"].map(s => /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setState(prev => ({\n                  ...prev,\n                  stance: s\n                })),\n                className: `px-3 py-1 md:px-4 md:py-2 rounded-lg text-sm md:text-base ${stance === s ? s === \"with\" ? \"bg-green-500 text-white\" : \"bg-red-500 text-white\" : \"bg-gray-200\"}`,\n                children: s.charAt(0).toUpperCase() + s.slice(1)\n              }, s, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 15\n          }, this), userStanceLocked && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs md:text-sm text-gray-600 mb-4\",\n            children: [\"Your stance is locked as: \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: userStanceLocked\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 43\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: comment,\n            onChange: handleInputChange(\"comment\"),\n            className: \"w-full p-2 md:p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 mb-2 text-sm md:text-base\",\n            placeholder: \"Write a comment...\",\n            rows: \"3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n            whileHover: {\n              scale: 1.05\n            },\n            whileTap: {\n              scale: 0.95\n            },\n            onClick: handleComment,\n            disabled: commenting,\n            className: `w-full flex items-center justify-center px-3 py-1 md:px-4 md:py-2 rounded-lg shadow-md text-sm md:text-base ${commenting ? \"bg-teal-300 cursor-not-allowed\" : \"bg-teal-500 hover:bg-teal-600\"} text-white`,\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-4 w-4 md:h-5 md:w-5 mr-1 md:mr-2\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: \"2\",\n                d: \"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 15\n            }, this), commenting ? \"Posting...\" : \"Post Comment\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 md:mt-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col sm:flex-row justify-between items-center mb-4 space-y-2 sm:space-y-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl md:text-2xl font-bold text-gray-800\",\n            children: \"Comments\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: state.sortBy,\n            onChange: handleInputChange(\"sortBy\"),\n            className: \"px-2 py-1 md:px-3 md:py-1 border rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm md:text-base\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"latest\",\n              children: \"Latest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"mostLiked\",\n              children: \"Popular\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"earliest\",\n              children: \"Earliest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-h-[50vh] md:max-h-[calc(100vh-400px)] overflow-y-auto border rounded-lg p-3 md:p-4 bg-white shadow-md\",\n          children: sortedComments.length > 0 ? sortedComments.map((c, index) => {\n            var _c$user, _c$user2, _c$likedBy, _JSON$parse, _localStorage$getItem;\n            return /*#__PURE__*/_jsxDEV(motion.div, {\n              initial: {\n                opacity: 0,\n                y: 10\n              },\n              animate: {\n                opacity: 1,\n                y: 0\n              },\n              transition: {\n                duration: 0.3\n              },\n              className: `border-b py-2 md:py-3 ${c.stance === \"with\" ? \"bg-green-50\" : \"bg-red-50\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-700 text-sm md:text-base\",\n                children: c.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mt-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs md:text-sm text-gray-500\",\n                  children: [\"By:\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n                    to: `/profile/${((_c$user = c.user) === null || _c$user === void 0 ? void 0 : _c$user.username) || \"unknown\"}`,\n                    className: \"hover:underline\",\n                    children: ((_c$user2 = c.user) === null || _c$user2 === void 0 ? void 0 : _c$user2.username) || \"Unknown\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 478,\n                    columnNumber: 23\n                  }, this), \" \", \"| \", new Date(c.createdAt).toLocaleString(), \" | Stance: \", c.stance]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 476,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n                  className: `flex items-center rounded-full bg-gray-100 shadow-sm text-sm md:text-base hover:bg-gray-200 ${(_c$likedBy = c.likedBy) !== null && _c$likedBy !== void 0 && _c$likedBy.includes((_JSON$parse = JSON.parse(atob((_localStorage$getItem = localStorage.getItem(\"token\")) === null || _localStorage$getItem === void 0 ? void 0 : _localStorage$getItem.split(\".\")[1]))) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.userId) ? \"bg-orange-100 text-orange-700\" : \"text-gray-700\"}`,\n                  whileHover: {\n                    scale: 1.05\n                  },\n                  whileTap: {\n                    scale: 0.95\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleCommentLike(c._id),\n                    className: \"flex items-center px-2 py-1 md:px-3 md:py-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                      className: \"h-3 w-3 md:h-4 md:w-4 mr-1\",\n                      fill: \"none\",\n                      stroke: \"currentColor\",\n                      viewBox: \"0 0 24 24\",\n                      children: /*#__PURE__*/_jsxDEV(\"path\", {\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        strokeWidth: \"2\",\n                        d: \"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 502,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 496,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: c.likes || 0\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 509,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 492,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 19\n              }, this)]\n            }, c._id || index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 17\n            }, this);\n          }) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500 text-center text-sm md:text-base\",\n            children: \"No comments yet. Be the first to comment!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 516,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mt-6 md:mt-8\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/debate\",\n          className: \"text-teal-600 hover:underline font-semibold text-sm md:text-base\",\n          children: \"\\u2190 Back to Debate Hub\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 297,\n    columnNumber: 5\n  }, this);\n};\n_s(DebatePage, \"q30P+ubMMN6TNdj6yDjzCPde2cw=\", false, function () {\n  return [useParams];\n});\n_c = DebatePage;\nexport default DebatePage;\nvar _c;\n$RefreshReg$(_c, \"DebatePage\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","useMemo","useParams","Link","API","motion","jsxDEV","_jsxDEV","DebatePage","_s","_debate$author","_debate$author2","id","state","setState","debate","comment","stance","userStanceLocked","comments","loading","voting","commenting","bookmarking","error","sortBy","passcode","passcodeRequired","enteredPasscode","fetchDebate","passcodeParam","prev","passcodeToUse","url","encodeURIComponent","data","get","token","localStorage","getItem","userId","JSON","parse","atob","split","userComments","filter","c","user","_id","length","err","_err$response","console","response","message","_err$response2","_err$response3","_err$response4","_err$response4$data","status","intervalId","setInterval","prevDebate","needsUpdate","upvotes","downvotes","views","bookmarkCount","stringify","upvotedBy","downvotedBy","newComments","existingCommentIds","Set","map","commentsToAdd","has","isBookmarked","updated","find","nc","likes","likedBy","clearInterval","handlePasscodeSubmit","e","preventDefault","trim","handleVote","voteType","Error","endpoint","post","headers","Authorization","_error$response","_error$response$data","handleBookmark","_error$response2","_error$response2$data","handleComment","finalStance","text","newComment","_error$response3","_error$response3$data","handleCommentLike","commentId","_error$response4","_error$response4$data","sortedComments","sort","a","b","Date","createdAt","handleInputChange","field","target","value","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","required","div","initial","opacity","y","animate","transition","duration","title","openingArgument","category","to","author","username","toLocaleString","viewsFormatted","whileHover","scale","whileTap","onClick","disabled","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","s","charAt","toUpperCase","slice","placeholder","rows","button","index","_c$user","_c$user2","_c$likedBy","_JSON$parse","_localStorage$getItem","includes","_c","$RefreshReg$"],"sources":["/Users/govindsinghtanwar/coding/Projects/debatify/frontend/src/pages/DebatePage.js"],"sourcesContent":["import React, { useEffect, useState, useCallback, useMemo } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport API from \"../api/axiosInstance\";\nimport { motion } from \"framer-motion\";\n\nconst DebatePage = () => {\n  const { id } = useParams();\n  const [state, setState] = useState({\n    debate: null,\n    comment: \"\",\n    stance: \"\",\n    userStanceLocked: null,\n    comments: [],\n    loading: true,\n    voting: false,\n    commenting: false,\n    bookmarking: false,\n    error: null,\n    sortBy: \"latest\",\n    passcode: \"\",\n    passcodeRequired: false,\n    enteredPasscode: null,\n  });\n\n  const fetchDebate = useCallback(\n    async (passcodeParam = null) => {\n      try {\n        setState((prev) => ({ ...prev, loading: true, error: null }));\n        const passcodeToUse = passcodeParam || state.enteredPasscode;\n        const url = passcodeToUse\n          ? `/debates/${id}?passcode=${encodeURIComponent(passcodeToUse)}`\n          : `/debates/${id}`;\n        const { data } = await API.get(url);\n\n        const token = localStorage.getItem(\"token\");\n        let userStanceLocked = null;\n        if (token) {\n          const userId = JSON.parse(atob(token.split(\".\")[1])).userId;\n          const userComments = data.comments.filter((c) => c.user._id === userId);\n          if (userComments.length > 0) userStanceLocked = userComments[0].stance;\n        }\n\n        setState((prev) => ({\n          ...prev,\n          debate: data,\n          comments: data.comments || [],\n          userStanceLocked,\n          enteredPasscode: passcodeParam || prev.enteredPasscode,\n          passcodeRequired: false,\n          loading: false,\n        }));\n      } catch (err) {\n        console.error(\"Fetch error:\", err.response?.data || err.message);\n        setState((prev) => ({\n          ...prev,\n          loading: false,\n          passcodeRequired: err.response?.status === 401,\n          error:\n            err.response?.status === 401 && passcodeParam\n              ? \"Incorrect passcode. Please try again.\"\n              : err.response?.data?.message || \"Failed to load debate.\",\n        }));\n      }\n    },\n    [id]\n  );\n\n  useEffect(() => {\n    fetchDebate();\n  }, [fetchDebate]);\n\n  useEffect(() => {\n    const intervalId = setInterval(async () => {\n      try {\n        const url = state.enteredPasscode\n          ? `/debates/${id}?passcode=${encodeURIComponent(state.enteredPasscode)}&poll=true`\n          : `/debates/${id}?poll=true`;\n        const { data } = await API.get(url);\n\n        setState((prev) => {\n          const prevDebate = prev.debate || {};\n          const needsUpdate =\n            prevDebate.upvotes !== data.upvotes ||\n            prevDebate.downvotes !== data.downvotes ||\n            prevDebate.views !== data.views ||\n            prevDebate.bookmarkCount !== data.bookmarkCount ||\n            JSON.stringify(prevDebate.upvotedBy) !== JSON.stringify(data.upvotedBy) ||\n            JSON.stringify(prevDebate.downvotedBy) !== JSON.stringify(data.downvotedBy);\n\n          const newComments = data.comments || [];\n          const existingCommentIds = new Set(prev.comments.map((c) => c._id));\n          const commentsToAdd = newComments.filter((c) => !existingCommentIds.has(c._id));\n\n          return {\n            ...prev,\n            debate: needsUpdate\n              ? {\n                  ...prevDebate,\n                  upvotes: data.upvotes || 0,\n                  downvotes: data.downvotes || 0,\n                  views: data.views || 0,\n                  bookmarkCount: data.bookmarkCount || 0,\n                  upvotedBy: data.upvotedBy || prevDebate.upvotedBy,\n                  downvotedBy: data.downvotedBy || prevDebate.downvotedBy,\n                  isBookmarked: data.isBookmarked,\n                }\n              : prevDebate,\n            comments: [\n              ...prev.comments.map((c) => {\n                const updated = newComments.find((nc) => nc._id === c._id);\n                return updated && (c.likes !== updated.likes || JSON.stringify(c.likedBy) !== JSON.stringify(updated.likedBy))\n                  ? { ...c, likes: updated.likes, likedBy: updated.likedBy }\n                  : c;\n              }),\n              ...commentsToAdd,\n            ],\n          };\n        });\n      } catch (error) {\n        console.error(\"Error polling debate:\", error);\n      }\n    }, 5000);\n    return () => clearInterval(intervalId);\n  }, [id, state.enteredPasscode]);\n\n  const handlePasscodeSubmit = useCallback((e) => {\n    e.preventDefault();\n    if (!state.passcode.trim()) {\n      setState((prev) => ({ ...prev, error: \"Please enter a passcode.\" }));\n      return;\n    }\n    fetchDebate(state.passcode);\n  }, [fetchDebate, state.passcode]);\n\n  const handleVote = useCallback(async (voteType) => {\n    try {\n      setState((prev) => ({ ...prev, voting: true, error: null }));\n      const token = localStorage.getItem(\"token\");\n      if (!token) throw new Error(\"You must be logged in to vote.\");\n      const endpoint = voteType === \"upvote\" ? `/debates/${id}/upvote` : `/debates/${id}/downvote`;\n      const { data } = await API.post(endpoint, {}, { headers: { Authorization: `Bearer ${token}` } });\n\n      setState((prev) => ({\n        ...prev,\n        debate: {\n          ...prev.debate,\n          upvotes: data.upvotes || 0,\n          downvotes: data.downvotes || 0,\n          upvotedBy: data.upvotedBy || prev.debate.upvotedBy,\n          downvotedBy: data.downvotedBy || prev.debate.downvotedBy,\n        },\n        voting: false,\n      }));\n    } catch (error) {\n      console.error(\"Error voting:\", error);\n      setState((prev) => ({\n        ...prev,\n        voting: false,\n        error: error.response?.data?.message || \"Failed to vote.\",\n      }));\n    }\n  }, [id]);\n\n  const handleBookmark = useCallback(async () => {\n    try {\n      setState((prev) => ({ ...prev, bookmarking: true, error: null }));\n      const token = localStorage.getItem(\"token\");\n      if (!token) throw new Error(\"You must be logged in to bookmark.\");\n      const { data } = await API.post(`/debates/${id}/bookmark`, {}, { headers: { Authorization: `Bearer ${token}` } });\n\n      setState((prev) => ({\n        ...prev,\n        debate: { ...prev.debate, bookmarkCount: data.bookmarkCount, isBookmarked: data.isBookmarked },\n        bookmarking: false,\n      }));\n    } catch (error) {\n      console.error(\"Error bookmarking:\", error);\n      setState((prev) => ({\n        ...prev,\n        bookmarking: false,\n        error: error.response?.data?.message || \"Failed to bookmark.\",\n      }));\n    }\n  }, [id]);\n\n  const handleComment = useCallback(async () => {\n    try {\n      setState((prev) => ({ ...prev, commenting: true, error: null }));\n      const token = localStorage.getItem(\"token\");\n      if (!token) throw new Error(\"You must be logged in to comment.\");\n      if (!state.comment.trim()) throw new Error(\"Comment cannot be empty.\");\n      if (!state.stance && !state.userStanceLocked) throw new Error(\"Please select your stance.\");\n\n      const finalStance = state.userStanceLocked || state.stance;\n      const { data } = await API.post(\n        `/debates/${id}/comment`,\n        { text: state.comment, stance: finalStance },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n\n      const newComment = data.comments[data.comments.length - 1];\n      setState((prev) => ({\n        ...prev,\n        comments: [...prev.comments, newComment],\n        comment: \"\",\n        userStanceLocked: prev.userStanceLocked || finalStance,\n        commenting: false,\n      }));\n    } catch (error) {\n      console.error(\"Error commenting:\", error);\n      setState((prev) => ({\n        ...prev,\n        commenting: false,\n        error: error.response?.data?.message || \"Failed to comment.\",\n      }));\n    }\n  }, [id, state.comment, state.stance, state.userStanceLocked]);\n\n  const handleCommentLike = useCallback(async (commentId) => {\n    try {\n      setState((prev) => ({ ...prev, error: null }));\n      const token = localStorage.getItem(\"token\");\n      if (!token) throw new Error(\"You must be logged in to like a comment.\");\n      const { data } = await API.post(\n        `/debates/${id}/comment/${commentId}/like`,\n        {},\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n\n      setState((prev) => ({\n        ...prev,\n        comments: prev.comments.map((c) =>\n          c._id === commentId ? { ...c, likes: data.likes, likedBy: data.likedBy } : c\n        ),\n      }));\n    } catch (error) {\n      console.error(\"Error liking comment:\", error);\n      setState((prev) => ({\n        ...prev,\n        error: error.response?.data?.message || \"Failed to like comment.\",\n      }));\n    }\n  }, [id]);\n\n  const sortedComments = useMemo(() => {\n    return [...state.comments].sort((a, b) => {\n      if (state.sortBy === \"mostLiked\") return (b.likes || 0) - (a.likes || 0);\n      if (state.sortBy === \"earliest\") return new Date(a.createdAt) - new Date(b.createdAt);\n      return new Date(b.createdAt) - new Date(a.createdAt);\n    });\n  }, [state.comments, state.sortBy]);\n\n  const handleInputChange = useCallback((field) => (e) => {\n    setState((prev) => ({ ...prev, [field]: e.target.value }));\n  }, []);\n\n  if (state.loading) {\n    return (\n      <p className=\"text-center mt-5 md:mt-10 text-gray-600 text-base md:text-lg\">Loading debate...</p>\n    );\n  }\n\n  if (state.passcodeRequired) {\n    return (\n      <div className=\"min-h-screen flex flex-col justify-center items-center bg-gradient-to-r from-teal-50 to-blue-50 p-4 md:p-5 md:ml-64\">\n        <h2 className=\"text-xl md:text-2xl font-bold mb-4 text-gray-800\">This is a Private Debate</h2>\n        <form onSubmit={handlePasscodeSubmit} className=\"bg-white shadow-lg rounded-lg p-4 md:p-6 w-full max-w-md\">\n          <label className=\"block mb-2 text-gray-700 text-sm md:text-base\">Enter Passcode:</label>\n          <input\n            type=\"password\"\n            value={state.passcode}\n            onChange={handleInputChange(\"passcode\")}\n            className=\"w-full p-2 md:p-3 border rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm md:text-base\"\n            required\n          />\n          <button\n            type=\"submit\"\n            className=\"w-full bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 rounded-lg text-sm md:text-base\"\n          >\n            Submit\n          </button>\n        </form>\n        {state.error && <p className=\"mt-4 text-red-600 text-sm md:text-base\">{state.error}</p>}\n      </div>\n    );\n  }\n\n  if (!state.debate) {\n    return (\n      <p className=\"text-center mt-5 md:mt-10 text-red-500 text-base md:text-lg\">Debate not found.</p>\n    );\n  }\n\n  const { debate, comment, stance, userStanceLocked, voting, commenting, bookmarking, error } = state;\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-r from-teal-50 to-blue-50 md:ml-64\">\n      <div className=\"p-4 md:p-5 max-w-4xl mx-auto\">\n        {error && (\n          <div className=\"mb-4 p-2 md:p-3 bg-red-100 text-red-700 rounded-md text-center text-sm md:text-base\">\n            {error}\n          </div>\n        )}\n\n        <div className=\"bg-white shadow-lg rounded-lg p-4 md:p-5\">\n          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.5 }}>\n            <h2 className=\"text-2xl md:text-4xl font-bold text-gray-800 mb-2\">{debate.title}</h2>\n            <p className=\"text-gray-600 mb-4 text-sm md:text-base\">{debate.openingArgument}</p>\n            <p className=\"text-xs md:text-sm text-teal-600 mb-4\">\n              Category: <span className=\"font-semibold\">{debate.category}</span> | By:{\" \"}\n              <Link to={`/profile/${debate.author?.username || \"unknown\"}`} className=\"font-semibold hover:underline\">\n                {debate.author?.username || \"Unknown\"}\n              </Link>{\" \"}\n              | Created:{\" \"}\n              <span className=\"font-semibold\">\n                {debate.createdAt ? new Date(debate.createdAt).toLocaleString() : \"Unknown\"}\n              </span>{\" \"}\n              | Views: <span className=\"font-semibold\">{debate.viewsFormatted || debate.views || 0}</span>\n            </p>\n\n            <div className=\"flex flex-col sm:flex-row sm:space-x-4 mb-4 md:mb-6 space-y-2 sm:space-y-0\">\n              <motion.div\n                className={`flex items-center rounded-full bg-gray-100 shadow-sm text-sm md:text-base ${\n                  voting ? \"opacity-50 cursor-not-allowed\" : \"hover:bg-gray-200\"\n                }`}\n                whileHover={{ scale: voting ? 1 : 1.05 }}\n                whileTap={{ scale: voting ? 1 : 0.95 }}\n              >\n                <button\n                  onClick={() => handleVote(\"upvote\")}\n                  disabled={voting}\n                  className=\"flex items-center px-2 py-1 md:px-3 md:py-2 text-gray-700 hover:text-green-600\"\n                >\n                  <svg\n                    className=\"h-4 w-4 md:h-5 md:w-5\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 15l7-7 7 7\" />\n                  </svg>\n                </button>\n                <span className=\"px-1 md:px-2 text-gray-800 font-medium\">\n                  {(debate.upvotes || 0) - (debate.downvotes || 0)}\n                </span>\n                <button\n                  onClick={() => handleVote(\"downvote\")}\n                  disabled={voting}\n                  className=\"flex items-center px-2 py-1 md:px-3 md:py-2 text-gray-700 hover:text-red-600\"\n                >\n                  <svg\n                    className=\"h-4 w-4 md:h-5 md:w-5\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\" />\n                  </svg>\n                </button>\n              </motion.div>\n\n              <motion.div\n                className={`flex items-center rounded-full bg-gray-100 shadow-sm text-sm md:text-base ${\n                  bookmarking ? \"opacity-50 cursor-not-allowed\" : \"hover:bg-gray-200\"\n                } ${debate.isBookmarked ? \"bg-yellow-100 text-yellow-700\" : \"text-gray-700\"}`}\n                whileHover={{ scale: bookmarking ? 1 : 1.05 }}\n                whileTap={{ scale: bookmarking ? 1 : 0.95 }}\n              >\n                <button\n                  onClick={handleBookmark}\n                  disabled={bookmarking}\n                  className=\"flex items-center px-2 py-1 md:px-3 md:py-2\"\n                >\n                  <svg\n                    className=\"h-4 w-4 md:h-5 md:w-5 mr-1 md:mr-2\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"2\"\n                      d=\"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-5-7 5V5z\"\n                    />\n                  </svg>\n                  <span>{debate.bookmarkCount || 0}</span>\n                </button>\n              </motion.div>\n            </div>\n\n            {!userStanceLocked && (\n              <div className=\"mb-4\">\n                <label className=\"block text-sm md:text-base font-medium text-gray-700 mb-1\">Your Stance:</label>\n                <div className=\"flex space-x-2 md:space-x-4\">\n                  {[\"with\", \"against\"].map((s) => (\n                    <button\n                      key={s}\n                      onClick={() => setState((prev) => ({ ...prev, stance: s }))}\n                      className={`px-3 py-1 md:px-4 md:py-2 rounded-lg text-sm md:text-base ${\n                        stance === s ? (s === \"with\" ? \"bg-green-500 text-white\" : \"bg-red-500 text-white\") : \"bg-gray-200\"\n                      }`}\n                    >\n                      {s.charAt(0).toUpperCase() + s.slice(1)}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n            {userStanceLocked && (\n              <p className=\"text-xs md:text-sm text-gray-600 mb-4\">\n                Your stance is locked as: <span className=\"font-semibold\">{userStanceLocked}</span>\n              </p>\n            )}\n\n            <textarea\n              value={comment}\n              onChange={handleInputChange(\"comment\")}\n              className=\"w-full p-2 md:p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 mb-2 text-sm md:text-base\"\n              placeholder=\"Write a comment...\"\n              rows=\"3\"\n            />\n            <motion.button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={handleComment}\n              disabled={commenting}\n              className={`w-full flex items-center justify-center px-3 py-1 md:px-4 md:py-2 rounded-lg shadow-md text-sm md:text-base ${\n                commenting ? \"bg-teal-300 cursor-not-allowed\" : \"bg-teal-500 hover:bg-teal-600\"\n              } text-white`}\n            >\n              <svg\n                className=\"h-4 w-4 md:h-5 md:w-5 mr-1 md:mr-2\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\"\n                />\n              </svg>\n              {commenting ? \"Posting...\" : \"Post Comment\"}\n            </motion.button>\n          </motion.div>\n        </div>\n\n        <div className=\"mt-4 md:mt-6\">\n          <div className=\"flex flex-col sm:flex-row justify-between items-center mb-4 space-y-2 sm:space-y-0\">\n            <h3 className=\"text-xl md:text-2xl font-bold text-gray-800\">Comments</h3>\n            <select\n              value={state.sortBy}\n              onChange={handleInputChange(\"sortBy\")}\n              className=\"px-2 py-1 md:px-3 md:py-1 border rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm md:text-base\"\n            >\n              <option value=\"latest\">Latest</option>\n              <option value=\"mostLiked\">Popular</option>\n              <option value=\"earliest\">Earliest</option>\n            </select>\n          </div>\n\n          <div className=\"max-h-[50vh] md:max-h-[calc(100vh-400px)] overflow-y-auto border rounded-lg p-3 md:p-4 bg-white shadow-md\">\n            {sortedComments.length > 0 ? (\n              sortedComments.map((c, index) => (\n                <motion.div\n                  key={c._id || index}\n                  initial={{ opacity: 0, y: 10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ duration: 0.3 }}\n                  className={`border-b py-2 md:py-3 ${c.stance === \"with\" ? \"bg-green-50\" : \"bg-red-50\"}`}\n                >\n                  <p className=\"text-gray-700 text-sm md:text-base\">{c.text}</p>\n                  <div className=\"flex justify-between items-center mt-1\">\n                    <p className=\"text-xs md:text-sm text-gray-500\">\n                      By:{\" \"}\n                      <Link to={`/profile/${c.user?.username || \"unknown\"}`} className=\"hover:underline\">\n                        {c.user?.username || \"Unknown\"}\n                      </Link>{\" \"}\n                      | {new Date(c.createdAt).toLocaleString()} | Stance: {c.stance}\n                    </p>\n                    <motion.div\n                      className={`flex items-center rounded-full bg-gray-100 shadow-sm text-sm md:text-base hover:bg-gray-200 ${\n                        c.likedBy?.includes(JSON.parse(atob(localStorage.getItem(\"token\")?.split(\".\")[1]))?.userId)\n                          ? \"bg-orange-100 text-orange-700\"\n                          : \"text-gray-700\"\n                      }`}\n                      whileHover={{ scale: 1.05 }}\n                      whileTap={{ scale: 0.95 }}\n                    >\n                      <button\n                        onClick={() => handleCommentLike(c._id)}\n                        className=\"flex items-center px-2 py-1 md:px-3 md:py-2\"\n                      >\n                        <svg\n                          className=\"h-3 w-3 md:h-4 md:w-4 mr-1\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          viewBox=\"0 0 24 24\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth=\"2\"\n                            d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\n                          />\n                        </svg>\n                        <span>{c.likes || 0}</span>\n                      </button>\n                    </motion.div>\n                  </div>\n                </motion.div>\n              ))\n            ) : (\n              <p className=\"text-gray-500 text-center text-sm md:text-base\">\n                No comments yet. Be the first to comment!\n              </p>\n            )}\n          </div>\n        </div>\n\n        <div className=\"text-center mt-6 md:mt-8\">\n          <Link to=\"/debate\" className=\"text-teal-600 hover:underline font-semibold text-sm md:text-base\">\n             Back to Debate Hub\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DebatePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}